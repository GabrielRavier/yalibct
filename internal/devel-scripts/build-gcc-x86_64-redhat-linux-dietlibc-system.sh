#!/usr/bin/env bash
CC='diet gcc' \
    cmake \
        -B build/dietlibc-system \
        -DCMAKE_C_FLAGS='-ggdb3 -Wno-deprecated-declarations' \
        -DYALIBCT_LIBC_HAS_NAN=OFF \
        -DYALIBCT_LIBC_HAS_FCVT=OFF \
        -DYALIBCT_LIBC_HAS_ECVT=OFF \
        -DYALIBCT_LIBC_HAS_VSWPRINTF=OFF \
        -DYALIBCT_LIBC_HAS_FWPRINTF=OFF \
        -DYALIBCT_LIBC_HAS_SWPRINTF=OFF \
        -DYALIBCT_LIBC_HAS_VFWPRINTF=OFF \
        -DYALIBCT_LIBC_HAS_FESETROUND=OFF \
        -DYALIBCT_LIBC_HAS_INFINITY=OFF \
        -DYALIBCT_LIBC_HAS_NL_ARGMAX=OFF \
        -DYALIBCT_LIBC_HAS_FEGETROUND=OFF \
        -DYALIBCT_LIBC_HAS_CKD_ADD=OFF \
        -DYALIBCT_LIBC_HAS_VDPRINTF=OFF \
        -DYALIBCT_LIBC_HAS_DPRINTF=OFF \
        -DYALIBCT_DISABLE_PRINTF_A_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_E_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_LC_NUMERIC_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_LOWERCASE_F_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_0_FLAG_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_HASH_FLAG_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_L_FLAG_ON_C_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_L_FLAG_ON_S_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_ALL_NON_STANDARD_LOCALE_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_ROUNDING_DIRECTION_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_NUMBERED_ARGUMENTS_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_G_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_PRECISION_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_N_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_SCANF_LOWERCASE_F_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_UPPERCASE_L_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_UPPERCASE_S_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_UPPERCASE_C_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_LIBC_HAS_STRNLEN=OFF \
        -DYALIBCT_LIBC_HAS_MEMCHR=OFF \
        -DYALIBCT_DISABLE_PRINTF_LOWERCASE_B_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_UPPERCASE_B_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_LIBC_HAS_STATIC_ASSERT=OFF \
        -DYALIBCT_LIBC_HAS_LDEXP=OFF \
        -DYALIBCT_LIBC_HAS_LOG=OFF \
        -DYALIBCT_LIBC_HAS_POW=OFF \
        -DYALIBCT_LIBC_HAS_EXP=OFF \
        -DYALIBCT_LIBC_HAS_FLOOR=OFF \
        -DYALIBCT_LIBC_HAS_FREXP=OFF \
        -DYALIBCT_DISABLE_PRINTF_HH_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_C_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_T_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_APOSTROPHE_FLAG_TESTS=ON \
        -DYALIBCT_DISABLE_PRINTF_ERRNO_TESTS=ON \
        -DYALIBCT_LIBC_HAS_WCSNCMP=OFF \
        -DYALIBCT_DISABLE_SCANF_J_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_SCANF_Z_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_SCANF_T_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_DISABLE_SCANF_P_CONVERSION_SPECIFIER_TESTS=ON \
        -DYALIBCT_LIBC_HAS_OPEN_MEMSTREAM=OFF \
        -DYALIBCT_LIBC_HAS_WCSCASECMP=OFF \
        -DYALIBCT_LIBC_HAS_STRCASECMP=OFF \
        -DYALIBCT_DISABLE_PRINTF_H_LENGTH_MODIFIER_TESTS=ON \
        -DYALIBCT_LIBC_HAS_WCSCMP=OFF \
        -DYALIBCT_DISABLE_SCANF_NUMBERED_ARGUMENTS_TESTS=ON \
        -DYALIBCT_LIBC_HAS_STRUCT_STAT_ST_ATIM=OFF \
        -DYALIBCT_LIBC_HAS_STRUCT_STAT_ST_MTIM=OFF \
        -DYALIBCT_LIBC_HAS_STRUCT_STAT_ST_CTIM=OFF \
        -DYALIBCT_LIBC_HAS_O_SEARCH=OFF \
        -DYALIBCT_LIBC_HAS_UTIME_NOW=OFF \
        -DYALIBCT_LIBC_HAS_UTIME_OMIT=OFF \
&& \
    cmake --build build/dietlibc-system --parallel 14
